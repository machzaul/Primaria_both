<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Pilih Frame - PRIMACTION</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            background: url('/assets/BG (2).png') no-repeat center center fixed;
            background-size: cover;
            min-height: 100vh;
            margin: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            font-family: 'Arial', sans-serif;
            position: relative;
            overflow-x: hidden;
        }

        .header {
            position: absolute;
            top: 3%;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
        }

        .header img {
            height: 80px;
            scale: 1;
        }


        .frame-selector {
            position: relative;
            width: 90%;
            max-width: 600px;
            margin: 30% auto 0;
            padding: 40px 35px 200px;
            z-index: 5;
        }

        .selector-title {
            text-align: center;
            font-size: 1.8rem;
            margin-bottom: 30px;
            color: white;
            font-weight: 300;
            font-family: 'DM Sans', 'Arial', sans-serif;
        }

        .frames-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            margin-bottom: 30px;
        }

        .frame-option {
            position: relative;
            width: 100%;
            aspect-ratio: 9 / 16; /* Rasio portrait standar - frame akan sama tinggi */
            cursor: pointer;
            border: 4px solid transparent; /* Border transparan default */
            border-radius: 0px;
            overflow: hidden; /* Potong gambar yang keluar */
            transition: all 0.3s ease;
            background: #000; /* Background hitam untuk area kosong */
        }


        .frame-option.selected {
            outline: 7px solid #dd1d1d;
            outline-offset: 6px; 
        }

        .frame-option > img:first-child {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain; /* KUNCI! Mengisi penuh container */
            object-position: center; /* Posisikan di tengah */
            display: block;
        }

        .frame-option .check-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            z-index: 2;
            display: none;
            pointer-events: none;
            border-radius: 50%;
        }

        .frame-option.selected .check-icon {
            display: block;
        }

        .btn-continue {
            width: 100%;
            padding: 18px;
            background: #2a2a2a;
            color: #666;
            border: none;
            border-radius: 2px;
            font-size: 1.3rem;
            cursor: not-allowed;
            transition: all 0.3s ease;
            font-weight: 700;
            box-sizing: border-box;
        }

        .btn-continue:disabled {
            background: #2a2a2a;
            color: #666;
        }

        .btn-continue.active {
            background: linear-gradient(90deg, #FE0E14 0%, #98080C 100%);
            color: white;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(254, 14, 20, 0.4);
            font-weight: 600;
        }

        .btn-continue.active:hover {
            opacity: 0.9;
        }

        @media (max-width: 768px) {
            .frame-selector {
                width: 90%;
                padding: 30px 20px;
                margin: 25% auto 0;
            }

            .selector-title {
                font-size: 1.5rem;
                margin-bottom: 25px;
            }

            .btn-continue {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>

    <div class="header">
        <img src="{{ url_for('static', filename='assets/logoprimaction.png') }}" alt="PRIMACTION Logo">
    </div>


    <div class="frame-selector">
        <div class="selector-title">Pilih frame yang kamu suka</div>

        <div class="frames-grid">
            <div class="frame-option" data-frame="1">
                <img src="{{ url_for('static', filename='assets/pilihframe1.png') }}" alt="Frame 1">
                <img src="{{ url_for('static', filename='assets/chekcs.png') }}" alt="Selected" class="check-icon">
            </div>
            <div class="frame-option" data-frame="2">
                <img src="{{ url_for('static', filename='assets/pilihframe2.png') }}" alt="Frame 2">
                <img src="{{ url_for('static', filename='assets/chekcs.png') }}" alt="Selected" class="check-icon">
            </div>
            <div class="frame-option" data-frame="3">
                <img src="{{ url_for('static', filename='assets/pilihframe3.png') }}" alt="Frame 3">
                <img src="{{ url_for('static', filename='assets/chekcs.png') }}" alt="Selected" class="check-icon">
            </div>
            <div class="frame-option" data-frame="4">
                <img src="{{ url_for('static', filename='assets/pilihframe4.png') }}" alt="Frame 4">
                <img src="{{ url_for('static', filename='assets/chekcs.png') }}" alt="Selected" class="check-icon">
            </div>
        </div>

        <button class="btn-continue" id="continueBtn" disabled>Lanjut Gan</button>
    </div>

    <audio id="clickSound" preload="auto">
        <source src="{{ url_for('static', filename='assets/sound/click.wav') }}" type="audio/wav">
    </audio>


    <script>
        function navigateTo(url) {
            window.parent.postMessage({ type: 'navigateTo', url: url }, '*');
        }

        const clickSound = document.getElementById('clickSound');

        if (clickSound) clickSound.volume = 0.5;

        function playClickSound() {
            if (clickSound) {
                clickSound.currentTime = 0;
                clickSound.play().catch(() => {});
            }
        }

        // Gunakan pointerup â€” satu event untuk semua input
        document.body.addEventListener('pointerup', playClickSound, { passive: true });

        let selectedFrame = null;

        const frameOptions = document.querySelectorAll('.frame-option');
        const continueBtn = document.getElementById('continueBtn');

        frameOptions.forEach(option => {
            option.addEventListener('click', function() {
                frameOptions.forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                selectedFrame = this.dataset.frame;

                continueBtn.disabled = false;
                continueBtn.classList.add('active');
            });
        });

        continueBtn.addEventListener('click', function() {
            if (!selectedFrame) return;

            localStorage.setItem('selectedFrame', selectedFrame);
            navigateTo('/dream-selection-content');
        });
    </script>

</body>
</html>